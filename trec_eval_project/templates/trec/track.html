{% extends 'core/base.html' %}

{% block resources %}
 <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

    google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
	
    function drawChart() {
      
      	var data = google.visualization.arrayToDataTable(
    		{{task_average|safe}});
      
        var options = {
          title: 'MAP Score Visualisation',
          hAxis: {title: '', minValue: 0, maxValue: data.length+1},
          vAxis: {title: 'MAP Score', minValue: 0, maxValue: 1},
          legend: 'none'
        };

        var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));

        chart.draw(data, options);
      }
    </script>
{% endblock %}


{% block title %}Task{% endblock %}

{% block breadcrumbs %}
<li><a href="{% url 'tracks' %}">Tracks</a></li>
<li class="active">Track "{{ track.title }}"</li>
{% endblock %}

{% block content %}
    {% if track %}
    	
    	<div id="chart_div" style="width: 900px; height: 300px;"></div>
    
        <div class="larger-text"> Tasks for track "{{ track.title }}"</div>
                    
        <div class="panel panel-default">
            <div class="panel-heading">
                This is the page for all of the tasks of a given track - select a task and see the associated run table / graph
            </div>
                    
            {% if tasks %}
                <table class="table table-hover">       
                    <tr>
                        <th>Task Title</th>
                        <th>Year</th>
                        <th>Description</th>
                    </tr>

                    {% for task in tasks %}
                        <tr>
                            <td><a href="{% url 'task' task.slug %}">{{ task.slug }}</a></td>
                            <td>{{ task.year }}</td>
                            <td>{{ task.description }}</td>
                        </tr>
                    {% endfor %}
                </table>
                            
            {% else %}
                    <strong>No tasks currently in this track.</strong>
            {% endif %}
        </div>
    {% else %}
        The track {{ track.title }} does not exist!
    {% endif %}
{% endblock %}