<!DOCTYPE html>

{% load staticfiles %} 

<html>

    <head lang="en">
	<!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

      // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawRecallChart);

      google.charts.setOnLoadCallback(drawPNChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawRecallChart() {
  
  		var data = google.visualization.arrayToDataTable([
    		['Recall', 'Precision'],
    		[0,{{ run.recall00 }}], [0.1, {{ run.recall01 }}], [0.2, {{ run.recall02 }}], [0.3, {{ run.recall03 }}], [0.4, {{ run.recall04 }}], [0.5, {{ run.recall05 }}], [0.6, {{ run.recall06 }}], [0.7, {{ run.recall07 }}], [0.8, {{ run.recall08 }}], [0.9, {{ run.recall09 }}], [1.0, {{ run.recall10 }}]]);

  		var options = {
    		title: 'Recall-Precision Curve',
    		hAxis: {title: 'Recall'},
    		vAxis: {title: 'Precision'},
    		legend: 'none',
    		trendlines: {
      			0: {
        		type: 'exponential',
        		visibleInLegend: true,
      			}
    		}
  		};

  		var chart = new google.visualization.ScatterChart(document.getElementById('recall_chart_div'));
  			chart.draw(data, options);
		}
		
		
	function drawPNChart() {
  
  		var data = google.visualization.arrayToDataTable([
    		['Number of Documents', 'Precision'],
    		[5,{{ run.p5 }}], [10, {{ run.p10 }}], [15, {{ run.p15 }}], [20, {{ run.p20 }}], [100, {{ run.p100 }}], [200, {{ run.p200 }}], [500, {{ run.p500 }}], [1000, {{ run.p1000 }}]]);

  		var options = {
    		title: 'Document Level Averages',
    		hAxis: {title: 'Number of Documents'},
    		vAxis: {title: 'Precision'},
    		legend: 'none',
    		trendlines: {
      			0: {
        		type: 'exponential',
        		visibleInLegend: true,
      			}
    		}
  		};

  		var chart = new google.visualization.ScatterChart(document.getElementById('pn_chart_div'));
  			chart.draw(data, options);
		}
		
    </script>
  
    	<meta charset="UTF-8">
        <title>Trec - {% block title %}The Trec Evaluation Application!{% endblock %}</title>
    </head>

    <body>
    	<!-- A Page's Body Goes Here -->
    	<div>
    	{% block body_block %}{% endblock %} 
    	</div>
    	
    	<hr />
    	
    	<div>
    		<ul>
    		{% if user.is_authenticated %}
    			<li><a href="{% url 'auth_logout' %}?next=/trec/">Logout</a></li>
    		{% else %}
    			<li><a href="{% url 'register' %}">Register Here</a></li>
    			<li><a href="{% url 'auth_login' %}">Login</a></li>    		
    		{% endif %}
    		
    			<li><a href="{% url 'about' %}">About</a></li>
    			<li><a href="{% url 'home' %}">Home</a></li>
    			<li><a href="{% url 'tracks' %}">Tracks</a></li>
    		</ul>
    	</div>
    </body>
</html>
